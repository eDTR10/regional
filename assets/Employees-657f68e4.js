import{p as U,r as h,j as e,q as j,D as T,s as F,b as q,t as E,v as O,m as I,w as A,x as V,f as z,g as $,h as b,i as p,k as P,l as m,a as v,y as H,z as Y,I as x,A as C,F as _,J as S,K as D,N,O as k,S as g,Q as Z,e as J,R as K}from"./index-0aa3940c.js";import{P as Q}from"./pen-2dcf5623.js";const G=U("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),R=h.forwardRef(({className:i,...d},n)=>e.jsx("div",{ref:n,className:j("rounded-lg border bg-card text-card-foreground shadow-sm",i),...d}));R.displayName="Card";const W=h.forwardRef(({className:i,...d},n)=>e.jsx("div",{ref:n,className:j("flex flex-col space-y-1.5 p-6",i),...d}));W.displayName="CardHeader";const X=h.forwardRef(({className:i,...d},n)=>e.jsx("h3",{ref:n,className:j("text-2xl font-semibold leading-none tracking-tight",i),...d}));X.displayName="CardTitle";const ee=h.forwardRef(({className:i,...d},n)=>e.jsx("p",{ref:n,className:j("text-sm text-muted-foreground",i),...d}));ee.displayName="CardDescription";const se=h.forwardRef(({className:i,...d},n)=>e.jsx("div",{ref:n,className:j("p-6 pt-0",i),...d}));se.displayName="CardContent";const te=h.forwardRef(({className:i,...d},n)=>e.jsx("div",{ref:n,className:j("flex items-center p-6 pt-0",i),...d}));te.displayName="CardFooter";function B(i){switch(i){case 1:return"Regional Office";case 2:return"Bukidnon Provincial Office";case 3:return"Camiguin Provincial Office";case 4:return"Misamis Oriental Provincial Office";case 5:return"Misamis Occidental Provincial Office";case 6:return"Lanao del Norte Provincial Office";default:return"Unknown Department"}}function re(i){switch(i){case 1:return"In Office";case 2:return"Out of Office";case 3:return"On Travel";case 4:return"On Leave";case 5:return"Off Set";case 6:return"Holiday";default:return"Unknown Status"}}function ae({activityId:i,employee:d}){const[n,u]=h.useState([]),[s,t]=h.useState({});function o(){v.get(`activity/${i}`,{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(r=>{u(r.data),console.log(r.data)}).catch(r=>{console.error("There was an error fetching the departments!",r)})}return e.jsx("div",{children:e.jsxs(T,{children:[e.jsx(F,{asChild:!0,children:e.jsx(q,{className:"h-4 w-4 cursor-pointer",onClick:()=>{o(),t(d)}})}),e.jsx(E,{className:"border border-border rounded-md sm:w-[90%] ",children:e.jsxs(O,{children:[e.jsx("div",{children:e.jsxs(R,{className:"bg-white rounded-md p-4 mt-5 mb-10 flex gap-3 items-center  sm:w-[90%] xxs:w-[50%]",children:[e.jsx("div",{className:"w-40 h-40 rounded overflow-hidden",children:e.jsx("img",{src:s!=null&&s.photos?`https://edtr.pythonanywhere.com${s==null?void 0:s.photos}`:"https://github.com/shadcn.png",alt:"Profile Picture",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:" text-start",children:[e.jsx("div",{className:" text-xs text-white bg-primary p-1 rounded-lg text-center",children:I(s==null?void 0:s.status)}),e.jsx("h2",{className:"text-start font-semibold text-primary font-small",children:e.jsx("span",{className:"font-small text-lg ",children:s==null?void 0:s.full_name})}),e.jsx("h2",{className:"text-sm text-gray-500 text-primary",children:B(s==null?void 0:s.deptid)})]})]})}),e.jsx(A,{className:"text-start text-primary",children:"Employee Activities"}),e.jsx(V,{children:e.jsx("div",{className:"overflow-auto bg-primary-foreground max-h-full sm:w-[90%] xxs:w-[90%]",children:e.jsxs(z,{tableName:"attendance",children:[e.jsx($,{children:e.jsxs(b,{children:[e.jsx(p,{className:"text-white sticky top-0 bg-primary border border-border",children:"Activity"}),e.jsx(p,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"Date from"}),e.jsx(p,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"Date to"}),e.jsx(p,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"Description"})]})}),e.jsx(P,{children:n.length!=0?n.map(r=>e.jsxs(b,{className:"border border-border",children:[e.jsx(m,{className:"font-small",children:re(r.status)}),e.jsx(m,{className:"font-small",children:r.fromDate}),e.jsx(m,{className:"font-small",children:r.toDate}),e.jsx(m,{className:"font-small",children:r.description})]})):e.jsx(b,{children:e.jsx(m,{className:"text-center border border-border",colSpan:4,children:"No activity found"})})})]})})})]})})]})})}var ie="Label",M=h.forwardRef((i,d)=>e.jsx(H.label,{...i,ref:d,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=i.onMouseDown)==null||s.call(i,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));M.displayName=ie;var L=M;const le=Y("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=h.forwardRef(({className:i,...d},n)=>e.jsx(L,{ref:n,className:j(le(),i),...d}));c.displayName=L.displayName;function ne({employee:i,getAllUsers:d,departments:n}){const[u,s]=h.useState(!1),[t,o]=h.useState({}),r=a=>{if(!a)return"";const l=new Date(a),f=`0${l.getMonth()+1}`.slice(-2),y=`0${l.getDate()}`.slice(-2);return`${l.getFullYear()}-${f}-${y}`};function w(){v.put(`users/update/${t.uid}/`,{birthday:t.birthday,city:t.city,deptid:t.deptid,email:t.email,email2:t.email2,full_name:t.full_name,hiredday:t.hiredday,job_title:t.job_title,ophone:t.ophone,sex:t.sex,state:t.state,status:t.status,street:t.street,employee_id:t.employee_id,zip:t.zip},{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(a=>{s(!1),g.fire({icon:"success",title:"Updated Successfully...",showConfirmButton:!1,timer:2e3}),d()}).catch(a=>{console.log(a.response.data.non_field_errors[0]),g.fire({icon:"error",title:"Oops...",text:a.response.data.non_field_errors[0],showConfirmButton:!1})})}return e.jsxs(T,{open:u,onOpenChange:s,children:[e.jsx(F,{asChild:!0,children:e.jsx(Q,{onClick:()=>{o(i)},className:"h-4 w-4 text-primary cursor-pointer"})}),e.jsxs(E,{className:"sm:w-[90%] xxs:w-[90%] rounded-md ",children:[e.jsx(O,{children:e.jsx(A,{className:"text-start text-primary",children:"Edit profile"})}),e.jsxs("form",{className:j("grid items-start grid-cols-2 w-full p-2 flex-row gap-4 text-primary"),onSubmit:a=>{a.preventDefault(),w()},children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"ID ",children:"Employee ID"}),e.jsx(x,{type:"text",id:"text",value:t.employee_id,onChange:a=>{o({...t,employee_id:a.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"email ",children:"Email"}),e.jsx(x,{type:"email",id:"email",value:t.email,onChange:a=>{o({...t,email:a.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"fullname",children:"Full name"}),e.jsx(x,{id:"fullname",value:t.full_name,onChange:a=>{o({...t,full_name:a.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"address",children:"Address street"}),e.jsx(x,{id:"address",value:t.street,onChange:a=>{o({...t,street:a.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"city",children:"City or Municipality"}),e.jsx(x,{id:"city",value:t.city,onChange:a=>{o({...t,city:a.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"zip",children:"Zip code"}),e.jsx(x,{id:"zip",value:t.zip,onChange:a=>{o({...t,zip:a.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"sex",children:"Sex"}),e.jsxs(C,{value:t.sex,onValueChange:a=>{o({...t,sex:a})},children:[e.jsx(_,{children:e.jsx(S,{placeholder:"Select gender"})}),e.jsxs(D,{children:[e.jsx(N,{value:"Male",children:"Male"}),e.jsx(N,{value:"Female",children:"Female"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"office",children:"Office"}),e.jsxs(C,{value:t.deptid,onValueChange:a=>{o({...t,deptid:parseInt(a)})},children:[e.jsx(_,{children:e.jsx(S,{placeholder:"Select office"})}),e.jsx(D,{children:n.map(a=>e.jsx(N,{value:a.deptid,children:a.dept_name},a.deptid))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"position",children:"Position"}),e.jsx(x,{id:"position",value:t.job_title,onChange:a=>{o({...t,job_title:a.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"birthday",children:"Birthday"}),e.jsx(x,{id:"birthday",type:"date",value:r(t.birthday),onChange:a=>{o({...t,birthday:a.target.value})}})]}),e.jsx(k,{className:"gap-2 col-span-2",children:"Save changes"})]})]})]})}function de({getAllUsers:i,departments:d}){const[n,u]=h.useState(!1),[s,t]=h.useState({birthday:"",city:"",deptid:1,email:"",email2:"",full_name:"",hiredday:"",job_title:"",ophone:"",sex:"",state:null,status:1,street:"",zip:"",password:"@user322w"});function o(){v.post("users/bulk/",[{city:s.city,deptid:s.deptid,email:s.email,email2:s.email2,full_name:s.full_name,job_title:s.job_title,ophone:s.ophone,sex:s.sex,state:s.state,status:s.status,street:s.street,employee_id:s.employee_id,zip:s.zip,password:"@user322w"}],{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(r=>{u(!1),g.fire({icon:"success",title:"Updated Successfully...",showConfirmButton:!1,timer:2e3}),i()}).catch(r=>{console.log(r.response.data.non_field_errors[0]),g.fire({icon:"error",title:"Oops...",text:r.response.data.non_field_errors[0],showConfirmButton:!1})})}return e.jsxs(T,{open:n,onOpenChange:u,children:[e.jsx(F,{asChild:!0,children:e.jsxs(k,{className:" flex items-center ",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Add Employee"]})}),e.jsxs(E,{className:"sm:w-[90%] xxs:w-[90%] rounded-md ",children:[e.jsx(O,{children:e.jsx(A,{className:"text-start text-primary",children:"Add Employee"})}),e.jsxs("form",{className:j("grid items-start grid-cols-2 w-full p-2 flex-row gap-4 text-primary"),onSubmit:r=>{r.preventDefault(),o()},children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"ID ",children:"Employee ID"}),e.jsx(x,{type:"text",required:!0,id:"text",className:" uppercase",value:s.employee_id,onChange:r=>{t({...s,employee_id:r.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"email ",children:"Email"}),e.jsx(x,{type:"email",required:!0,id:"email",value:s.email,onChange:r=>{t({...s,email:r.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"fullname",children:"Full name"}),e.jsx(x,{id:"fullname",required:!0,value:s.full_name,onChange:r=>{t({...s,full_name:r.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"address",children:"Address street"}),e.jsx(x,{id:"address",value:s.street,onChange:r=>{t({...s,street:r.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"city",children:"City or Municipality"}),e.jsx(x,{id:"city",value:s.city,onChange:r=>{t({...s,city:r.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"zip",children:"Zip code"}),e.jsx(x,{id:"zip",value:s.zip,onChange:r=>{t({...s,zip:r.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"sex",children:"Sex"}),e.jsxs(C,{value:s.sex,onValueChange:r=>{t({...s,sex:r})},children:[e.jsx(_,{children:e.jsx(S,{placeholder:"Select gender"})}),e.jsxs(D,{children:[e.jsx(N,{value:"Male",children:"Male"}),e.jsx(N,{value:"Female",children:"Female"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"office",children:"Office"}),e.jsxs(C,{required:!0,value:s.deptid,onValueChange:r=>{t({...s,deptid:parseInt(r)})},children:[e.jsx(_,{children:e.jsx(S,{placeholder:"Select office"})}),e.jsx(D,{children:d.map(r=>e.jsx(N,{value:r.deptid,children:r.dept_name},r.deptid))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"position",children:"Position"}),e.jsx(x,{id:"position",value:s.job_title,onChange:r=>{t({...s,job_title:r.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"birthday",children:"Password"}),e.jsx(x,{id:"birthday",type:"password",required:!0,value:s.password,onChange:r=>{t({...s,password:r.target.value})}})]}),e.jsx(k,{className:"gap-2 col-span-2",children:"Save changes"})]})]})]})}function ce(){const[i,d]=h.useState([]),[n,u]=h.useState(""),[s,t]=h.useState([]);function o(){v.get("users/all-users/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(l=>{d(l.data)})}const r=async()=>{v.get("department/all/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(l=>{t(l.data)}).catch(l=>{console.error("There was an error fetching the departments!",l)})};h.useEffect(()=>{o(),r()},[]);const w=i?i.filter(l=>{var y;return(y=l.full_name)==null?void 0:y.toLowerCase().includes(n.toLowerCase())}):[],a=l=>{g.fire({title:"Are you sure?",text:`Do you want to delete ${l.full_name}'s account?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"}).then(f=>{f.isConfirmed&&v.delete(`users/delete/${l.uid}/`,{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(()=>{g.fire("Deleted!","Account has been deleted.","success"),o()}).catch(y=>{g.fire("Error!","Failed to delete account.","error"),console.error("Delete error:",y)})})};return e.jsxs("div",{id:"printss",className:"  relative flex flex-col gap-4 w-xl p-2 m-4 border border-border bg-primary-foreground rounded-md min-h-[130px]",children:[e.jsxs("div",{className:"flex p-4 justify-between items-center bg-primary mb-2",children:[e.jsx("p",{className:"text-white ",children:"LIST OF EMPLOYEE"}),e.jsx(G,{className:"text-6xl text-white"})]}),e.jsxs("div",{className:"flex items-center content-center justify-between py-2 ",children:[e.jsxs("div",{className:" h-8 w-1/2 flex gap-2",children:[e.jsx(J,{className:"text-primary mr-2 "}),e.jsx("input",{type:"text",placeholder:" Search...",value:n,onChange:l=>u(l.target.value),className:"outline-none  focus:outline-primary  border pl-2 h-full border-border rounded w-full text-foreground bg-primary-foreground"})]}),e.jsx("div",{children:e.jsx(de,{departments:s,getAllUsers:o})})]}),e.jsx("div",{className:"  ",children:e.jsxs(z,{children:[e.jsx($,{children:e.jsxs(b,{children:[e.jsx(p,{className:"w-[30px] border border-border text-white sticky top-0 bg-primary text-md ",children:"ID"}),e.jsx(p,{className:"text-white border border-border text-md sticky top-0 bg-primary cursor-pointer",children:"Employee"}),e.jsx(p,{className:"text-white border border-border text-md sticky top-0 bg-primary cursor-pointer",children:"Office"}),e.jsx(p,{className:"text-white border border-border text-md sticky top-0 bg-primary cursor-pointer",children:"Status"}),e.jsx(p,{className:"text-white border border-border text-md sticky top-0 bg-primary cursor-pointer",children:"Action"})]})}),e.jsx(P,{children:w.length!==0?w.map((l,f)=>e.jsxs(b,{className:"border border-border",children:[e.jsx(m,{children:l==null?void 0:l.employee_id}),e.jsx(m,{children:l==null?void 0:l.full_name}),e.jsx(m,{children:B(l.deptid)}),e.jsx(m,{children:I(l==null?void 0:l.status)}),e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(ae,{employee:l,activityId:l.uid}),e.jsx(ne,{employee:l,departments:s,getAllUsers:o}),e.jsx(K,{className:"h-4 w-4 text-red-500 cursor-pointer hover:text-red-300",onClick:()=>a(l)})]})})]},f)):e.jsx(b,{children:e.jsx(m,{className:"text-center border border-border",colSpan:5,children:"No employee found"})})})]})})]})}function me(){return e.jsx("div",{className:"animate__animated animate__slideInRight flex flex-col w-full mt-16 sm:mt-20  overflow-hidden min-h-screen ",children:e.jsx(ce,{})})}export{me as default};
