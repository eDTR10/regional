import{r as l,j as e,D as j,s as C,t as w,v as D,w as b,x as y,I as g,O as p,Q as N,a as x,S as m,R as T,e as k,f as _,g as E,h as v,i as f,k as I,l as u,V as A}from"./index-2da551a3.js";import{P as $}from"./pen-92eda9a4.js";import{S as z}from"./sheet-55bea321.js";function B({deptData:i,fetchData:c}){const[a,d]=l.useState(i),[r,n]=l.useState(!1);l.useEffect(()=>{d(i)},[i]);async function s(){x.put(`department/${a.deptid}/`,a,{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(o=>{n(!1),c(),m.fire({icon:"success",title:"Updated Successfully...",showConfirmButton:!1,timer:2e3})}).catch(o=>{console.error("Error updating department:",o),m.fire({icon:"error",title:"Oops...",text:"Something went wrong while updating the data!"})})}return e.jsxs(j,{open:r,onOpenChange:n,children:[e.jsx(C,{asChild:!0,children:e.jsx($,{onClick:()=>n(!0),className:" cursor-pointer w-4 h-4 hover:text-primary/80"})}),e.jsxs(w,{className:"sm:max-w-[90%] text-foreground",children:[e.jsxs(D,{children:[e.jsx(b,{children:"Edit office"}),e.jsx(y,{children:"Make changes to the office here. Click save when you're done."})]}),e.jsxs("form",{onSubmit:o=>{o.preventDefault(),s()},className:"grid gap-4 py-5",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-foreground",children:"Office ID"}),e.jsx(g,{id:"name",value:a.deptid,onChange:o=>d({...a,deptid:Number(o.target.value)}),className:"bg-muted pointer-events-none text-foreground col-span-3"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-foreground",children:"Office name"}),e.jsx(g,{id:"username",value:a.dept_name,required:!0,onChange:o=>d({...a,dept_name:o.target.value}),className:"text-foreground col-span-3"})]}),e.jsx(p,{type:"submit",children:"Save changes"})]}),e.jsx(N,{})]})]})}function F({fetchData:i}){const[c,a]=l.useState({deptid:null,dept_name:""}),[d,r]=l.useState(!1);async function n(){x.post("department/all/",c,{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(s=>{r(!1),i(),a({deptid:null,dept_name:""}),m.fire({icon:"success",title:"addedd Successfully...",showConfirmButton:!1,timer:2e3})}).catch(s=>{console.error("Error updating department:",s),m.fire({icon:"error",title:"Oops...",text:"Something went wrong while adding the data!"})})}return e.jsxs(j,{open:d,onOpenChange:r,children:[e.jsx(C,{asChild:!0,children:e.jsxs(p,{variant:"default",className:" text-white flex gap-2 mr-2",children:[e.jsx("p",{children:"Add Office"}),e.jsx(T,{onClick:()=>r(!0),className:" cursor-pointer w-4 h-4 text-white"})]})}),e.jsxs(w,{className:"sm:max-w-[90%] text-foreground",children:[e.jsxs(D,{children:[e.jsx(b,{children:"Add office"}),e.jsx(y,{children:"Add office here. Click save when you're done."})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),n()},className:"grid gap-4 py-5",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"text-foreground",children:"Office name"}),e.jsx(g,{id:"username",value:c.dept_name,required:!0,onChange:s=>a({...c,dept_name:s.target.value}),className:"text-foreground col-span-3"})]}),e.jsx(p,{type:"submit",children:"Save Office"})]}),e.jsx(N,{})]})]})}const q=()=>{const[i,c]=l.useState(""),[a,d]=l.useState([]),[r,n]=l.useState({open:!1,employee:{}}),s=async()=>{x.get("department/all/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(t=>{d(t.data)}).catch(t=>{console.error("Error fetching data:",t.response?t.response.data:t.message),m.fire({icon:"error",title:"Oops...",text:"Something went wrong while fetching the data!"})})};l.useEffect(()=>{s()},[]);async function o(t){x.delete(`department/${t}/`,{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(h=>{s(),n({open:!1,employee:{}}),m.fire({icon:"success",title:"Deleted Successfully...",showConfirmButton:!1,timer:2e3})}).catch(h=>{console.error("Error updating department:",h),m.fire({icon:"error",title:"Oops...",text:"Something went wrong while Deleting the data!"})})}const O=a.filter(t=>{var S;return(S=t.dept_name)==null?void 0:S.toLowerCase().includes(i.toLowerCase())});return e.jsxs("div",{id:"printss",className:"  relative flex flex-col gap-4  mt-20 w-xl p-2 m-4 border border-border bg-primary-foreground rounded-md min-h-[130px]",children:[e.jsxs("div",{className:"flex p-4 justify-between items-center bg-primary mb-2",children:[e.jsx("p",{className:"text-white ",children:"LIST OF OFFICE"}),e.jsx(z,{className:"text-6xl text-white"})]}),e.jsxs("div",{className:"flex items-center content-center justify-between py-2 ",children:[e.jsxs("div",{className:" h-8 w-1/2 flex gap-2",children:[e.jsx(k,{className:"text-primary mr-2 "}),e.jsx("input",{type:"text",placeholder:" Search...",value:i,onChange:t=>c(t.target.value),className:"outline-none  focus:outline-primary  border pl-2 h-full border-border rounded w-full text-foreground bg-primary-foreground"})]}),e.jsx(F,{fetchData:s})]}),e.jsx("div",{className:"overflow-auto bg-primary-foreground max-h-full",children:e.jsxs(_,{children:[e.jsx(E,{children:e.jsxs(v,{children:[e.jsx(f,{className:"w-[40px] border border-border text-white sticky top-0 bg-primary",children:"#"}),e.jsx(f,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"Office"}),e.jsx(f,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"actions"})]})}),e.jsx(I,{children:O.map((t,h)=>e.jsxs(v,{className:" border border-border",children:[e.jsx(u,{className:"font-small",children:t.deptid}),e.jsx(u,{children:t.dept_name}),e.jsx(u,{children:e.jsxs("div",{className:" flex items-center justify-center gap-5",children:[e.jsx(B,{deptData:t,fetchData:s}),e.jsx(A,{onClick:()=>{n({open:!0,employee:t})},className:" text-red-600 w-4  h-4 cursor-pointer "})]})})]},h))})]})}),e.jsx(j,{open:r.open,onOpenChange:t=>{n({...r,open:t})},children:e.jsxs(w,{className:" z-50 absolute rounded-md",children:[e.jsx(b,{className:"text-foreground",children:"Confirm Delete Office"}),e.jsxs(y,{children:['Are you sure you want to delete "',r.employee.dept_name,'" Office?']}),e.jsxs(N,{children:[e.jsx(p,{variant:"outline",className:"text-foreground mt-2",onClick:()=>{n({open:!1,employee:{}})},children:"Cancel"}),e.jsx(p,{className:"text-white",onClick:()=>{o(r.employee.deptid)},children:"Confirm"})]})]})})]})},R=()=>e.jsx("div",{className:"  flex flex-col w-full mt-16 sm:mt-4  overflow-hidden min-h-screen ",children:e.jsx(q,{})});export{R as default};
