import{r as t,m as D,j as e,n as W,e as Y,O as a,W as K,f as G,g as Q,h as S,i as n,k as X,l as c,c as T,R as Z,D as C,t as A,w as k,x as I,I as ee,A as se,F as te,J as ae,K as re,N as p,b2 as O,V as _,a as f,S as i}from"./index-e7b6b6d5.js";const le=()=>{const[r,F]=t.useState(""),[m,oe]=t.useState("All"),[L,E]=t.useState([]),[H,l]=t.useState(!1),[B,o]=t.useState(!1),[g,P]=t.useState(null);t.useState("");const[ne,R]=t.useState(""),[d,j]=t.useState(""),[y,M]=t.useState(""),[v,$]=t.useState(""),[b,z]=t.useState(""),w=localStorage.getItem("user"),x=w?JSON.parse(w):null,J=async()=>{try{await f.post("holiday/",{USERID:x==null?void 0:x.uid,fromDate:y,toDate:v,description:b,status:6,period:d||1},{headers:{"Content-Type":"application/json",Authorization:`Token ${localStorage.getItem("accessToken")}`}}),i.fire({icon:"success",title:"Updated Successfully...",showConfirmButton:!1,timer:2e3}),l(!1),u(),R(""),j("")}catch(s){console.error("Error fetching data:",s.response?s.response.data:s.message),i.fire({icon:"error",title:"Oops...",text:s.response.data.non_field_errors[0],showConfirmButton:!1})}};console.log(g);const V=async()=>{try{await f.delete(`holiday/delete/${g.holiday_id}/`,{headers:{"Content-Type":"application/json",Authorization:`Token ${localStorage.getItem("accessToken")}`}}),i.fire({icon:"success",title:"Deleted Successfully...",showConfirmButton:!1,timer:2e3}),o(!1),u()}catch(s){console.error("Error deleting data:",s.response?s.response.data:s.message),i.fire({icon:"error",title:"Oops...",text:s.response.data.non_field_errors[0],showConfirmButton:!1})}},u=async()=>{try{const s=await f.get("holiday/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`,"Content-Type":"application/json",Accept:"application/json"}});E(s.data),console.log("Fetched data:",s.data)}catch(s){console.error("Error fetching data:",s.response?s.response.data:s.message)}};t.useEffect(()=>{u()},[]);const q=L.filter(s=>{var N;const h=((N=s.full_name)==null?void 0:N.toLowerCase().includes(r.toLowerCase()))||(s==null?void 0:s.description.toLowerCase().includes(r.toLowerCase()))||D(s==null?void 0:s.status).includes(r.toLowerCase()),U=m==="All"||D(s==null?void 0:s.status)===m;return h&&U});return e.jsxs("div",{className:"relative w-xl p-2 m-4 border border-border bg-primary-foreground min-h-[130px]",children:[e.jsxs("div",{className:"flex p-4 justify-between items-center bg-primary mb-2",children:[e.jsx("p",{className:"text-white ",children:"LIST OF HOLIDAYS"}),e.jsx(W,{className:"animate-bounce text-6xl text-white"})]}),e.jsxs("div",{className:"flex items-center w-full content-center py-2",children:[e.jsx(Y,{className:"text-primary mr-2"}),e.jsx("input",{type:"text",placeholder:" Search...",value:r,onChange:s=>F(s.target.value),className:"outline-none focus:outline-primary border pl-2 h-8 border-border rounded w-1/2 text-foreground bg-primary-foreground"}),e.jsx("div",{className:"flex-grow"})," ",e.jsxs(a,{title:"Add Activity",onClick:()=>l(!0),className:"ml-2 justify-end text-white flex gap-2",children:["Add Holiday ",e.jsx(K,{className:" w-4 h-4"})]})]}),e.jsx("div",{className:"overflow-auto bg-primary-foreground max-h-full",children:e.jsxs(G,{children:[e.jsx(Q,{children:e.jsxs(S,{children:[e.jsx(n,{className:"w-[170px] border border-border text-white sticky top-0 bg-primary",children:"HOLIDAY"}),e.jsx(n,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"FROM DATE"}),e.jsx(n,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"TO DATE"}),e.jsx(n,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"ACTION"})]})}),e.jsx(X,{children:q.map((s,h)=>e.jsxs(S,{className:"border border-border",children:[e.jsx(c,{className:"font-small",children:s==null?void 0:s.description}),e.jsx(c,{children:T(s==null?void 0:s.fromDate).customLongDateFormat}),e.jsx(c,{children:T(s==null?void 0:s.toDate).customLongDateFormat}),e.jsx(c,{children:e.jsx(a,{variant:"secondary",onClick:()=>{P(s),o(!0)},children:e.jsx(Z,{className:"text-red-500 w-4 h-4"})})})]},h))})]})}),e.jsx(C,{open:H,onOpenChange:l,children:e.jsxs(A,{className:"w-[350px]",children:[e.jsx(k,{className:"text-foreground",children:"Add Activity"}),e.jsx(I,{children:"Please fill in the details below to add a new activity."}),e.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[e.jsx(ee,{className:"col-span-4 text-foreground outline-none",required:!0,value:b,onChange:s=>z(s.target.value),placeholder:"Please input Holiday Name..."}),e.jsx("div",{className:"flex",children:e.jsxs(se,{value:d,onValueChange:s=>j(s),children:[e.jsx(te,{className:"text-foreground",children:e.jsx(ae,{placeholder:"Select Time Period"})}),e.jsxs(re,{children:[e.jsx(p,{value:"1",children:"Whole Day"}),e.jsx(p,{value:"2",children:"AM"}),e.jsx(p,{value:"3",children:"PM"})]})]})}),e.jsxs("div",{className:"flex gap-4 w-full justify-between",children:[e.jsxs("div",{className:"flex flex-col col-span-1 w-full",children:[e.jsx("p",{className:"text-md text-foreground  w-full",children:"From: "}),e.jsx(O,{value:y,onChange:s=>{console.log(s.target.value),M(s.target.value)},className:"text-foreground w-full flex justify-between",type:"date"})]}),e.jsxs("div",{className:"flex flex-col col-span-1 w-full",children:[e.jsx("p",{className:"text-md text-foreground ",children:"To: "}),e.jsx(O,{value:v,onChange:s=>{console.log(s.target.value),$(s.target.value)},className:"text-foreground flex justify-between",type:"date"})]})]})]}),e.jsxs(_,{children:[e.jsx(a,{variant:"outline",className:"text-foreground mt-4",onClick:()=>l(!1),children:"Cancel"}),e.jsx(a,{className:"mt-4",onClick:J,children:"Submit"})]})]})}),e.jsx(C,{open:B,onOpenChange:o,children:e.jsxs(A,{className:"w-[350px]",children:[e.jsx(k,{className:"text-foreground",children:"Confirm Deletion"}),e.jsx(I,{children:"Are you sure you want to delete this activity?"}),e.jsxs(_,{children:[e.jsx(a,{variant:"outline",className:"text-foreground mt-4",onClick:()=>o(!1),children:"Cancel"}),e.jsx(a,{className:"bg-red-500 text-foreground mt-4",onClick:V,children:"Delete"})]})]})})]})};function ie(){return e.jsxs("div",{className:"flex-1 h-full overflow-auto",children:[e.jsx("div",{className:"flex items-center mt-20 justify-between"}),e.jsx("div",{className:"animate__animated animate__slideInRight",children:e.jsx(le,{})})]})}export{ie as default};
