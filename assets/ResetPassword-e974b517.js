import{r as n,j as e,q as x,z as N,b7 as y,T as P,M as C,I as g,O as k,L as R,a as S}from"./index-77389956.js";import{R as T,L as I,a as A,b as D}from"./login-dfaebb13.js";const L=N("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),i=n.forwardRef(({className:l,variant:s,...a},t)=>e.jsx("div",{ref:t,role:"alert",className:x(L({variant:s}),l),...a}));i.displayName="Alert";const c=n.forwardRef(({className:l,...s},a)=>e.jsx("h5",{ref:a,className:x("mb-1 font-medium leading-none tracking-tight",l),...s}));c.displayName="AlertTitle";const m=n.forwardRef(({className:l,...s},a)=>e.jsx("div",{ref:a,className:x("text-sm [&_p]:leading-relaxed",l),...s}));m.displayName="AlertDescription";const V=({variant:l,title:s,description:a})=>{switch(l){case"success":return e.jsxs(i,{variant:"default",className:" border-green-500 ",children:[e.jsx(c,{className:"  text-green-500 ",children:s}),e.jsx(m,{className:" text-green-500 sm:text-xs ",children:a})]});case"error":return e.jsxs(i,{variant:"default",className:" border-red-500 ",children:[e.jsx(c,{className:" text-red-500",children:s}),e.jsx(m,{className:" text-red-500 sm:text-xs",children:a})]});default:return e.jsx(e.Fragment,{})}},K=()=>{const l=y(),[s,a]=n.useState({load:!1,type:"",title:"",message:""}),[t,u]=n.useState({...l,new_password:"",re_new_password:""}),[o,h]=n.useState(!1),[d,f]=n.useState(!1),j=r=>!(r.length<8||!/\d/.test(r));n.useEffect(()=>{h(j(t.new_password))},[t.new_password]),n.useEffect(()=>{t.new_password==t.re_new_password&&t.new_password!=""&&t.re_new_password!=""?f(!0):f(!1)},[t.new_password,t.re_new_password]);const[v,_]=n.useState(!1);async function b(){if(o&&d){a({load:!0,type:"",title:"",message:""});try{await S.post("users/reset_password_confirm/",t).then(r=>{console.log(r.status),a({load:!0,type:"success",title:"Congratulations, Password has updated!",message:"Hooray! Your account password has been successfully updated."}),setTimeout(()=>{a({load:!1,type:"",title:"",message:""}),u({...l,new_password:"",re_new_password:""}),_(!0)},3e3)})}catch{a({load:!0,type:"error",title:"Password Rest Unsuccessful",message:"Oops! There might be a problem."}),setTimeout(()=>{a({load:!1,type:"",title:"",message:""})},6e3)}}}const w=r=>{u({...t,[r.target.name]:r.target.value})},p=r=>{r.key==="Enter"&&console.log("Enter key pressed")};return e.jsx(P,{defaultTheme:"system",storageKey:"vite-ui-theme",children:e.jsxs("div",{className:"bg-background relative w-screen h-screen overflow-hidden flex justify-center",children:[e.jsx("div",{className:"absolute right-0 p-10 z-30",children:e.jsx(C,{})}),e.jsxs("div",{className:"relative w-full h-full flex flex-col gap-4 items-center justify-center",children:[e.jsx("img",{src:T,className:"pointer-events-none absolute z-0 h-full w-full object-cover opacity-5",alt:""}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("img",{src:I,className:"animate__animated animate__slideInLeft h-16 object-contain",alt:""}),e.jsx("a",{href:"https://www.facebook.com/DICTRegion10",target:"_blank",children:e.jsx("img",{src:A,className:"animate__animated animate__slideInRight h-24 object-contain",alt:""})})]}),e.jsxs("form",{onSubmit:r=>{r.preventDefault()},className:"animate__animated animate__fadeInUp mb-10 z-10 w-full sm:w-[95%] sm:mx-4 max-w-[450px] flex flex-col items-center min-h-[100px] py-10 px-6 rounded-md bg-card border-2 border-border gap-4",children:[e.jsx("div",{className:"w-[95%] h-16 flex",children:e.jsx("h1",{className:"text-foreground text-3xl font-bold",children:"Change Password"})}),e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx(g,{type:"password",placeholder:"New password",className:" text-accent-foreground w-full",value:t.new_password,name:"new_password",onChange:w,onKeyDown:p}),e.jsx("p",{className:o?" text-xs ml-2 mt-1 text-green-500":" text-xs ml-2 mt-1 text-red-500",children:o?"Valid password":"It must be at least 8 characters and include numbers."})]}),e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[e.jsx(g,{type:"password",placeholder:"Confirm New Password",value:t.re_new_password,className:" text-accent-foreground w-full",name:"re_new_password",onChange:w,onKeyDown:p}),e.jsx("p",{className:d?" text-xs ml-2 mt-1 text-green-500":" text-xs ml-2 mt-1 text-red-500",children:d?"Password match":"Password not match"})]}),e.jsx("button",{className:"btn-donate w-full",disabled:s.load,onClick:b,children:s.load?e.jsxs("div",{className:"flex gap-2 justify-center items-center",children:["Sending",e.jsx(D,{className:"loader animate-spin"})]}):"Reset Password"}),e.jsx("div",{className:s.load?"flex":"hidden",children:e.jsx(V,{variant:s.type,title:s.title,description:s.message})})]}),e.jsx(k,{className:v?"flex":"hidden",children:e.jsx(R,{id:"step1",to:"/regional",children:"Sign In"})})]})]})})};export{K as default};
