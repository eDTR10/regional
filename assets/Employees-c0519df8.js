import{p as B,r as d,j as e,q as u,D as T,s as D,b as H,t as O,v as _,m as E,w as F,x as U,f as A,g as P,h as j,i as m,k as $,l as x,a as y,y as V,z as q,I as h,A as v,F as w,J as C,K as S,N,O as Y,S as k,e as J}from"./index-26e853d0.js";import{P as K}from"./pen-3fcba73e.js";const Z=B("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),I=d.forwardRef(({className:s,...l},a)=>e.jsx("div",{ref:a,className:u("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l}));I.displayName="Card";const G=d.forwardRef(({className:s,...l},a)=>e.jsx("div",{ref:a,className:u("flex flex-col space-y-1.5 p-6",s),...l}));G.displayName="CardHeader";const Q=d.forwardRef(({className:s,...l},a)=>e.jsx("h3",{ref:a,className:u("text-2xl font-semibold leading-none tracking-tight",s),...l}));Q.displayName="CardTitle";const W=d.forwardRef(({className:s,...l},a)=>e.jsx("p",{ref:a,className:u("text-sm text-muted-foreground",s),...l}));W.displayName="CardDescription";const X=d.forwardRef(({className:s,...l},a)=>e.jsx("div",{ref:a,className:u("p-6 pt-0",s),...l}));X.displayName="CardContent";const ee=d.forwardRef(({className:s,...l},a)=>e.jsx("div",{ref:a,className:u("flex items-center p-6 pt-0",s),...l}));ee.displayName="CardFooter";function R(s){switch(s){case 1:return"Regional Office";case 2:return"Bukidnon Provincial Office";case 3:return"Camiguin Provincial Office";case 4:return"Misamis Oriental Provincial Office";case 5:return"Misamis Occidental Provincial Office";case 6:return"Lanao del Norte Provincial Office";default:return"Unknown Department"}}function te(s){switch(s){case 1:return"In Office";case 2:return"Out of Office";case 3:return"On Travel";case 4:return"On Leave";case 5:return"Off Set";case 6:return"Holiday";default:return"Unknown Status"}}function re({activityId:s,employee:l}){const[a,p]=d.useState([]),[i,r]=d.useState({});function n(){y.get(`activity/${s}`,{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(c=>{p(c.data),console.log(c.data)}).catch(c=>{console.error("There was an error fetching the departments!",c)})}return e.jsx("div",{children:e.jsxs(T,{children:[e.jsx(D,{asChild:!0,children:e.jsx(H,{className:"h-4 w-4 cursor-pointer",onClick:()=>{n(),r(l)}})}),e.jsx(O,{className:"border border-border rounded-md sm:w-[90%] ",children:e.jsxs(_,{children:[e.jsx("div",{children:e.jsxs(I,{className:"bg-white rounded-md p-4 mt-5 mb-10 flex gap-3 items-center  sm:w-[90%] xxs:w-[50%]",children:[e.jsx("div",{className:"w-40 h-40 rounded overflow-hidden",children:e.jsx("img",{src:i!=null&&i.photos?`https://edtr.pythonanywhere.com${i==null?void 0:i.photos}`:"https://github.com/shadcn.png",alt:"Profile Picture",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:" text-start",children:[e.jsx("div",{className:" text-xs text-white bg-primary p-1 rounded-lg text-center",children:E(i==null?void 0:i.status)}),e.jsx("h2",{className:"text-start font-semibold text-primary font-small",children:e.jsx("span",{className:"font-small text-lg ",children:i==null?void 0:i.full_name})}),e.jsx("h2",{className:"text-sm text-gray-500 text-primary",children:R(i==null?void 0:i.deptid)})]})]})}),e.jsx(F,{className:"text-start text-primary",children:"Employee Activities"}),e.jsx(U,{children:e.jsx("div",{className:"overflow-auto bg-primary-foreground max-h-full sm:w-[90%] xxs:w-[90%]",children:e.jsxs(A,{tableName:"attendance",children:[e.jsx(P,{children:e.jsxs(j,{children:[e.jsx(m,{className:"text-white sticky top-0 bg-primary border border-border",children:"Activity"}),e.jsx(m,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"Date from"}),e.jsx(m,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"Date to"}),e.jsx(m,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"Description"})]})}),e.jsx($,{children:a.length!=0?a.map(c=>e.jsxs(j,{className:"border border-border",children:[e.jsx(x,{className:"font-small",children:te(c.status)}),e.jsx(x,{className:"font-small",children:c.fromDate}),e.jsx(x,{className:"font-small",children:c.toDate}),e.jsx(x,{className:"font-small",children:c.description})]})):e.jsx(j,{children:e.jsx(x,{className:"text-center border border-border",colSpan:4,children:"No activity found"})})})]})})})]})})]})})}var se="Label",L=d.forwardRef((s,l)=>e.jsx(V.label,{...s,ref:l,onMouseDown:a=>{var i;a.target.closest("button, input, select, textarea")||((i=s.onMouseDown)==null||i.call(s,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));L.displayName=se;var z=L;const ae=q("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=d.forwardRef(({className:s,...l},a)=>e.jsx(z,{ref:a,className:u(ae(),s),...l}));o.displayName=z.displayName;function ie({employee:s,getAllUsers:l,departments:a}){const[p,i]=d.useState(!1),[r,n]=d.useState({}),c=t=>{if(!t)return"";const f=new Date(t),b=`0${f.getMonth()+1}`.slice(-2),M=`0${f.getDate()}`.slice(-2);return`${f.getFullYear()}-${b}-${M}`};function g(){y.put(`users/update/${r.uid}/`,{birthday:r.birthday,city:r.city,deptid:r.deptid,email:r.email,email2:r.email2,full_name:r.full_name,hiredday:r.hiredday,job_title:r.job_title,ophone:r.ophone,sex:r.sex,state:r.state,status:r.status,street:r.street,zip:r.zip},{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(t=>{i(!1),k.fire({icon:"success",title:"Updated Successfully...",showConfirmButton:!1,timer:2e3}),l()}).catch(t=>{console.log(t.response.data.non_field_errors[0]),k.fire({icon:"error",title:"Oops...",text:t.response.data.non_field_errors[0],showConfirmButton:!1})})}return e.jsxs(T,{open:p,onOpenChange:i,children:[e.jsx(D,{asChild:!0,children:e.jsx(K,{onClick:()=>{n(s)},className:"h-4 w-4 text-primary cursor-pointer"})}),e.jsxs(O,{className:"sm:w-[90%] xxs:w-[90%] rounded-md ",children:[e.jsx(_,{children:e.jsx(F,{className:"text-start text-primary",children:"Edit profile"})}),e.jsxs("form",{className:u("grid items-start grid-cols-2 w-full p-2 flex-row gap-4 text-primary"),onSubmit:t=>{t.preventDefault(),g()},children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"email ",children:"Email"}),e.jsx(h,{type:"email",id:"email",value:r.email,onChange:t=>{n({...r,email:t.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"fullname",children:"Full name"}),e.jsx(h,{id:"fullname",value:r.full_name,onChange:t=>{n({...r,full_name:t.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"address",children:"Address street"}),e.jsx(h,{id:"address",value:r.street,onChange:t=>{n({...r,street:t.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"city",children:"City or Municipality"}),e.jsx(h,{id:"city",value:r.city,onChange:t=>{n({...r,city:t.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"zip",children:"Zip code"}),e.jsx(h,{id:"zip",value:r.zip,onChange:t=>{n({...r,zip:t.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"sex",children:"Sex"}),e.jsxs(v,{value:r.sex,onValueChange:t=>{n({...r,sex:t})},children:[e.jsx(w,{children:e.jsx(C,{placeholder:"Select gender"})}),e.jsxs(S,{children:[e.jsx(N,{value:"Male",children:"Male"}),e.jsx(N,{value:"Female",children:"Female"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"office",children:"Office"}),e.jsxs(v,{value:r.deptid,onValueChange:t=>{n({...r,deptid:parseInt(t)})},children:[e.jsx(w,{children:e.jsx(C,{placeholder:"Select office"})}),e.jsx(S,{children:a.map(t=>e.jsx(N,{value:t.deptid,children:t.dept_name},t.deptid))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"position",children:"Position"}),e.jsx(h,{id:"position",value:r.job_title,onChange:t=>{n({...r,job_title:t.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"birthday",children:"Birthday"}),e.jsx(h,{id:"birthday",type:"date",value:c(r.birthday),onChange:t=>{n({...r,birthday:t.target.value})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"mobile",children:"Mobile"}),e.jsx(h,{id:"mobile",value:r.ophone,onChange:t=>{n({...r,ophone:t.target.value})}})]}),e.jsx(Y,{className:"gap-2 col-span-2",children:"Save changes"})]})]})]})}function le(){const[s,l]=d.useState([]),[a,p]=d.useState(""),[i,r]=d.useState([]);function n(){y.get("users/all-users/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(t=>{l(t.data)})}const c=async()=>{y.get("department/all/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}}).then(t=>{r(t.data)}).catch(t=>{console.error("There was an error fetching the departments!",t)})};d.useEffect(()=>{n(),c()},[]);const g=s?s.filter(t=>{var b;return(b=t.full_name)==null?void 0:b.toLowerCase().includes(a.toLowerCase())}):[];return e.jsxs("div",{id:"printss",className:"  relative flex flex-col gap-4 w-xl p-2 m-4 border border-border bg-primary-foreground rounded-md min-h-[130px]",children:[e.jsxs("div",{className:"flex p-4 justify-between items-center bg-primary mb-2",children:[e.jsx("p",{className:"text-white ",children:"LIST OF EMPLOYEE"}),e.jsx(Z,{className:"text-6xl text-white"})]}),e.jsxs("div",{className:"flex items-center content-center justify-between py-2 ",children:[e.jsxs("div",{className:" h-8 w-1/2 flex gap-2",children:[e.jsx(J,{className:"text-primary mr-2 "}),e.jsx("input",{type:"text",placeholder:" Search...",value:a,onChange:t=>p(t.target.value),className:"outline-none  focus:outline-primary  border pl-2 h-full border-border rounded w-full text-foreground bg-primary-foreground"})]}),e.jsx("div",{})]}),e.jsx("div",{className:"  ",children:e.jsxs(A,{children:[e.jsx(P,{children:e.jsxs(j,{children:[e.jsx(m,{className:"w-[30px] border border-border text-white sticky top-0 bg-primary text-md ",children:"No."}),e.jsx(m,{className:"text-white border border-border text-md sticky top-0 bg-primary cursor-pointer",children:"Employee"}),e.jsx(m,{className:"text-white border border-border text-md sticky top-0 bg-primary cursor-pointer",children:"Office"}),e.jsx(m,{className:"text-white border border-border text-md sticky top-0 bg-primary cursor-pointer",children:"Status"}),e.jsx(m,{className:"text-white border border-border text-md sticky top-0 bg-primary cursor-pointer",children:"Action"})]})}),e.jsx($,{children:g.length!==0?g.map((t,f)=>e.jsxs(j,{className:"border border-border",children:[e.jsx(x,{children:f+1}),e.jsx(x,{children:t==null?void 0:t.full_name}),e.jsx(x,{children:R(t.deptid)}),e.jsx(x,{children:E(t==null?void 0:t.status)}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(re,{employee:t,activityId:t.uid}),e.jsx(ie,{employee:t,departments:i,getAllUsers:n})]})})]},f)):e.jsx(j,{children:e.jsx(x,{className:"text-center border border-border",colSpan:5,children:"No employee found"})})})]})})]})}function oe(){return e.jsx("div",{className:"animate__animated animate__slideInRight flex flex-col w-full mt-16 sm:mt-20  overflow-hidden min-h-screen ",children:e.jsx(le,{})})}export{oe as default};
