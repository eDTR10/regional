import{r as c,U as S,H as E,P as f,C as _,j as e,c as v,d as D,e as k,f as H,g as M,h as A,i as h,k as I,l as b,a as g,S as P,B as $,m as B,G as L,n as F,o as K}from"./index-fbb00553.js";import{C as O,B as Y,H as z,a as R,b as U,D as G,c as J}from"./DashboardAnalogClock-f98b43ba.js";import{S as W}from"./sheet-c5bfb6b4.js";const q=r=>{var d,n,x,t,o,u,s,p,y,j,N,w,C;const[m,a]=c.useState(null),l=[{category:"Total Employees",count:(d=r==null?void 0:r.data)==null?void 0:d.total_employees,icon:S,color:"text-blue-500"},{category:"Total Attendance",count:(n=r==null?void 0:r.data)==null?void 0:n.total_in_today,icon:O,color:"text-green-500"},{category:"In-Office",count:(t=(x=r==null?void 0:r.data)==null?void 0:x.status_summary)==null?void 0:t.in_office,icon:Y,color:"text-red-500"},{category:"Out-of-Office",count:(u=(o=r==null?void 0:r.data)==null?void 0:o.status_summary)==null?void 0:u.out_of_office,icon:z,color:"text-yellow-500"},{category:"Work from Home",count:(p=(s=r==null?void 0:r.data)==null?void 0:s.status_summary)==null?void 0:p.on_home,icon:E,color:"text-green-500"},{category:"On Travel",count:(j=(y=r==null?void 0:r.data)==null?void 0:y.status_summary)==null?void 0:j.on_travel,icon:R,color:"text-red-500"},{category:"On Leave",count:(w=(N=r==null?void 0:r.data)==null?void 0:N.status_summary)==null?void 0:w.on_leave,icon:f,color:"text-red-500"},{category:"Todays Birthday",count:(C=r==null?void 0:r.data)==null?void 0:C.birthday_celebrants_count,icon:_,color:"text-red-500"}];return c.useEffect(()=>{localStorage.getItem("birthday")=="1"&&(a("name"),setTimeout(()=>{a("")},5e3))},[]),e.jsx("div",{children:e.jsx("div",{className:" w-full relative xs:w-[380px] ",children:e.jsx("div",{className:"grid grid-cols-8  w-full  sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4",children:l.map((i,T)=>i.category=="Todays Birthday"?e.jsxs("div",{className:" overflow-hidden animate-fadeIn bg-primary-foreground border border-border w-full rounded-lg p-6 py-4 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h2",{className:"text-md text-foreground font-bold pr-2",children:i.category}),e.jsx(i.icon,{className:`text-4xl ${i.color}`})," "]}),e.jsx("p",{className:"text-3xl text-right font-bold text-foreground md:mt-4",children:i.count})," ",m&&e.jsx(U,{})]},T):e.jsxs("div",{className:"animate-fadeIn bg-primary-foreground border border-border w-full rounded-lg p-6 py-4 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h2",{className:"text-md text-foreground font-bold pr-2",children:i.category}),e.jsx(i.icon,{className:`text-4xl ${i.color}`})," "]}),e.jsx("p",{className:"text-3xl text-right font-bold text-foreground md:mt-4",children:i.count})," "]},T))})})})},Q=()=>{const[r,m]=c.useState(""),[a,l]=c.useState("All"),[d,n]=c.useState([]);c.useEffect(()=>{(async()=>{try{const o=await g.get("checkinoutmisor/today/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}});n(o.data),console.log("Fetched data:",o.data)}catch(o){console.error("Error fetching data:",o.response?o.response.data:o.message),P.fire({icon:"error",title:"Oops...",text:"Something went wrong while fetching the data!"})}})()},[]);const x=d.filter(t=>{var s;const o=((s=t.full_name)==null?void 0:s.toLowerCase().includes(r.toLowerCase()))||v(t.CHECKTIME).localeTime12HourFormat.toLowerCase().includes(r.toLowerCase())||t.CHECKTYPE.toLowerCase().includes(r.toLowerCase()),u=a==="All"||D(t==null?void 0:t.CHECKTYPE)===a;return o&&u});return e.jsxs("div",{className:" relative w-xl p-2 m-4 border border-border bg-primary-foreground min-h-[130px]",children:[e.jsxs("div",{className:"flex p-4 justify-between items-center bg-primary mb-2",children:[e.jsx("p",{className:"text-white ",children:"TODAY'S ATTENDANCE"}),e.jsx(W,{className:"text-6xl text-white"})]}),e.jsxs("div",{className:"flex items-center content-center py-2 ",children:[e.jsx(k,{className:"text-primary mr-2"}),e.jsx("input",{type:"text",placeholder:" Search...",value:r,onChange:t=>m(t.target.value),className:"outline-none  focus:outline-primary  border pl-2 h-8 border-border rounded w-1/2 text-foreground bg-primary-foreground"})]}),e.jsxs("div",{className:"  flex gap-2 py-2",children:[e.jsx("button",{onClick:()=>l("All"),className:`p-2 border border-border text-primary rounded ${a==="All"?"bg-blue-500 text-white":""}`,children:"All"}),e.jsx("button",{onClick:()=>l("AM Arrival"),className:`p-2 border border-border text-primary rounded ${a==="AM Arrival"?"bg-blue-500 text-white":""}`,children:"AM Arrival"}),e.jsx("button",{onClick:()=>l("AM Departure"),className:`p-2 border border-border text-primary rounded ${a==="AM Departure"?"bg-blue-500 text-white":""}`,children:"AM Departure"}),e.jsx("button",{onClick:()=>l("PM Arrival"),className:`p-2 border border-border text-primary rounded ${a==="PM Arrival"?"bg-blue-500 text-white":""}`,children:"PM Arrival"}),e.jsx("button",{onClick:()=>l("PM Departure"),className:`p-2 border border-border text-primary rounded ${a==="PM Departure"?"bg-blue-500 text-white":""}`,children:"PM Departure"})]}),e.jsx("div",{className:"overflow-auto bg-primary-foreground max-h-full",children:e.jsxs(H,{tableName:"attendance",children:[e.jsx(M,{children:e.jsxs(A,{children:[e.jsx(h,{className:"w-[170px] border border-border text-white sticky top-0 bg-primary",children:"FULLNAME"}),e.jsx(h,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"CHECK TIME"}),e.jsx(h,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"CHECK TYPE"})]})}),e.jsx(I,{children:x.map((t,o)=>e.jsxs(A,{className:" border border-border",children:[e.jsx(b,{className:"font-small",children:t==null?void 0:t.full_name}),e.jsx(b,{children:v(t==null?void 0:t.CHECKTIME).localeTime12HourFormat}),e.jsx(b,{children:D(t==null?void 0:t.CHECKTYPE)})]},o))})]})})]})},V=r=>{switch(r){case 1:return{color:"text-green-500",icon:e.jsx(K,{className:"text-green-500"})};case 2:return{color:"text-red-500",icon:e.jsx(F,{className:"text-red-500"})};case 3:return{color:"text-blue-500",icon:e.jsx(L,{className:"text-blue-500"})};case 4:return{color:"text-yellow-500",icon:e.jsx(f,{className:"text-yellow-500"})};case 5:return{color:"text-yellow-500",icon:e.jsx(E,{className:"text-green-500"})};default:return{color:"text-gray-500",icon:e.jsx(f,{className:"text-gray-500"})}}},re=()=>{const[r,m]=c.useState([]),a=localStorage.getItem("user"),l=a?JSON.parse(a):null,d=l==null?void 0:l.full_name,[n,x]=c.useState([]),t=n!=null&&n.status?n.status:0,o=V(t);return c.useEffect(()=>{(async()=>{try{const s=await g.get("users/summary",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}});m(s.data),localStorage.setItem("birthday",s.data.birthday_celebrants.length!=0?"1":"0")}catch(s){console.error("Error fetching data:",s.response?s.response.data:s.message)}})()},[]),c.useEffect(()=>{(async()=>{try{const s=await g.get("users/userDetails",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}});x(s.data),console.log("Fetched data:",s.data)}catch(s){console.error("Error fetching data:",s.response?s.response.data:s.message)}})()},[]),e.jsxs("div",{className:"flex flex-col w-full overflow-hidden min-h-screen ",children:[e.jsx(G,{}),e.jsxs("div",{className:"flex-1 h-full overflow-auto mt-20",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"animate-pulse ml-4 text-2xl text-primary",children:["Hello, ",d,"! ðŸ‘‹"]}),e.jsxs("p",{className:"ml-4 text-sm italic text-foreground flex items-center",children:["I am currently ",e.jsx("span",{className:`mx-2 ${o.color}`,children:e.jsx($,{className:"animate-bounce",children:B(t)})}),o.icon]})]}),e.jsx(q,{data:r}),e.jsxs("div",{className:" animate__animated animate__slideInRight  grid  grid-cols-2 forTable:grid-cols-1",children:[e.jsx(Q,{}),e.jsx(J,{data:r})]})]})]})};export{re as default};
