import{r as c,c as T,d as v,j as e,e as S,f as _,g as k,h as D,i as h,k as H,l as b,a as g,S as M,U as I,H as A,P as f,C as P,B as $,m as L,G as B,n as F,o as K}from"./index-861f7ed7.js";import{S as O}from"./sheet-bff3cb21.js";import{C as U,B as Y,H as z,a as R,b as G,D as J,c as W}from"./DashboardAnalogClock-0eb6fb3a.js";const q=()=>{const[r,x]=c.useState(""),[a,l]=c.useState("All"),[i,n]=c.useState([]);c.useEffect(()=>{(async()=>{try{const o=await g.get("checkinoutregion/today/",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}});n(o.data),console.log("Fetched data:",o.data)}catch(o){console.error("Error fetching data:",o.response?o.response.data:o.message),M.fire({icon:"error",title:"Oops...",text:"Something went wrong while fetching the data!"})}})()},[]);const d=i.filter(t=>{var s;const o=((s=t.full_name)==null?void 0:s.toLowerCase().includes(r.toLowerCase()))||T(t.CHECKTIME).localeTime12HourFormat.toLowerCase().includes(r.toLowerCase())||t.CHECKTYPE.toLowerCase().includes(r.toLowerCase()),u=a==="All"||v(t==null?void 0:t.CHECKTYPE)===a;return o&&u});return e.jsxs("div",{className:" relative w-xl p-2 m-4 border border-border bg-primary-foreground min-h-[130px]",children:[e.jsxs("div",{className:"flex p-4 justify-between items-center bg-primary mb-2",children:[e.jsx("p",{className:"text-white ",children:"DAILY ATTENDANCE"}),e.jsx(O,{className:"text-6xl text-white"})]}),e.jsxs("div",{className:"flex items-center content-center py-2 ",children:[e.jsx(S,{className:"text-primary mr-2"}),e.jsx("input",{type:"text",placeholder:" Search...",value:r,onChange:t=>x(t.target.value),className:"outline-none  focus:outline-primary  border pl-2 h-8 border-border rounded w-1/2 text-foreground bg-primary-foreground"})]}),e.jsxs("div",{className:"  flex gap-2 py-2",children:[e.jsx("button",{onClick:()=>l("All"),className:`p-2 border border-border text-primary rounded ${a==="All"?"bg-blue-500 text-white":""}`,children:"All"}),e.jsx("button",{onClick:()=>l("AM Arrival"),className:`p-2 border border-border text-primary rounded ${a==="AM Arrival"?"bg-blue-500 text-white":""}`,children:"AM Arrival"}),e.jsx("button",{onClick:()=>l("AM Departure"),className:`p-2 border border-border text-primary rounded ${a==="AM Departure"?"bg-blue-500 text-white":""}`,children:"AM Departure"}),e.jsx("button",{onClick:()=>l("PM Arrival"),className:`p-2 border border-border text-primary rounded ${a==="PM Arrival"?"bg-blue-500 text-white":""}`,children:"PM Arrival"}),e.jsx("button",{onClick:()=>l("PM Departure"),className:`p-2 border border-border text-primary rounded ${a==="PM Departure"?"bg-blue-500 text-white":""}`,children:"PM Departure"})]}),e.jsx("div",{className:"overflow-auto bg-primary-foreground max-h-full",children:e.jsxs(_,{children:[e.jsx(k,{children:e.jsxs(D,{children:[e.jsx(h,{className:"w-[170px] border border-border text-white sticky top-0 bg-primary",children:"FULLNAME"}),e.jsx(h,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"CHECK TIME"}),e.jsx(h,{className:"text-white border border-border text-md sticky top-0 bg-primary",children:"CHECK TYPE"})]})}),e.jsx(H,{children:d.map((t,o)=>e.jsxs(D,{className:" border border-border",children:[e.jsx(b,{className:"font-small",children:t==null?void 0:t.full_name}),e.jsx(b,{children:T(t==null?void 0:t.CHECKTIME).localeTime12HourFormat}),e.jsx(b,{children:v(t==null?void 0:t.CHECKTYPE)})]},o))})]})})]})},Q=r=>{var i,n,d,t,o,u,s,p,y,j,N,w,C;const x=[{category:"Total Employees",count:(i=r==null?void 0:r.data)==null?void 0:i.total_employees,icon:I,color:"text-blue-500"},{category:"Total Attendance",count:(n=r==null?void 0:r.data)==null?void 0:n.total_in_today,icon:U,color:"text-green-500"},{category:"In-Office",count:(t=(d=r==null?void 0:r.data)==null?void 0:d.status_summary)==null?void 0:t.in_office,icon:Y,color:"text-red-500"},{category:"Out-of-Office",count:(u=(o=r==null?void 0:r.data)==null?void 0:o.status_summary)==null?void 0:u.out_of_office,icon:z,color:"text-yellow-500"},{category:"Work from Home",count:(p=(s=r==null?void 0:r.data)==null?void 0:s.status_summary)==null?void 0:p.on_home,icon:A,color:"text-green-500"},{category:"On Travel",count:(j=(y=r==null?void 0:r.data)==null?void 0:y.status_summary)==null?void 0:j.on_travel,icon:R,color:"text-red-500"},{category:"On Leave",count:(w=(N=r==null?void 0:r.data)==null?void 0:N.status_summary)==null?void 0:w.on_leave,icon:f,color:"text-red-500"},{category:"Todays Birthday",count:(C=r==null?void 0:r.data)==null?void 0:C.birthday_celebrants_count,icon:P,color:"text-red-500"}],[a,l]=c.useState(null);return c.useEffect(()=>{localStorage.getItem("birthday")=="1"&&(l("name"),setTimeout(()=>{l("")},5e3))},[]),console.log(r),e.jsx("div",{children:e.jsx("div",{className:"w-full relative xs:w-[380px]",children:e.jsx("div",{className:"grid grid-cols-8 w-full sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 p-4",children:x.map((m,E)=>e.jsxs("div",{className:"animate-fadeIn bg-primary-foreground border border-border w-full rounded-lg p-6 py-4 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h2",{className:"text-md text-foreground font-bold pr-2",children:m.category}),e.jsx(m.icon,{className:`text-4xl ${m.color}`})," "]}),e.jsx("p",{className:"text-3xl text-right font-bold text-foreground md:mt-4",children:m.count})," ",a&&e.jsx(G,{className:"w-screen"})]},E))})})})},V=r=>{switch(r){case 1:return{color:"text-green-500",icon:e.jsx(K,{className:"text-green-500"})};case 2:return{color:"text-red-500",icon:e.jsx(F,{className:"text-red-500"})};case 3:return{color:"text-blue-500",icon:e.jsx(B,{className:"text-blue-500"})};case 4:return{color:"text-yellow-500",icon:e.jsx(f,{className:"text-yellow-500"})};case 5:return{color:"text-yellow-500",icon:e.jsx(A,{className:"text-green-500"})};default:return{color:"text-gray-500",icon:e.jsx(f,{className:"text-gray-500"})}}},re=()=>{const[r,x]=c.useState([]),a=localStorage.getItem("user"),l=a?JSON.parse(a):null,i=l==null?void 0:l.full_name,[n,d]=c.useState([]),t=n!=null&&n.status?n.status:0,o=V(t);return c.useEffect(()=>{(async()=>{try{const s=await g.get("users/summary",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}});x(s.data),localStorage.setItem("birthday",s.data.birthday_celebrants.length!=0?"1":"0")}catch(s){console.error("Error fetching data:",s.response?s.response.data:s.message)}})()},[]),c.useEffect(()=>{(async()=>{try{const s=await g.get("users/userDetails",{headers:{Authorization:`Token ${localStorage.getItem("accessToken")}`}});d(s.data),console.log("Fetched data:",s.data)}catch(s){console.error("Error fetching data:",s.response?s.response.data:s.message)}})()},[]),e.jsxs("div",{className:"flex-1 h-full overflow-auto",children:[e.jsx(J,{}),e.jsxs("div",{className:"flex-1 items-center mt-20 justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"animate-pulse ml-4 text-2xl text-primary",children:["Hello, ",i,"! ðŸ‘‹"]}),e.jsxs("p",{className:"ml-4 text-sm italic text-foreground flex items-center",children:["I am currently ",e.jsx("span",{className:`mx-2 ${o.color}`,children:e.jsx($,{className:"animate-bounce",children:L(t)})}),o.icon]})]}),e.jsx(Q,{data:r})]}),e.jsxs("div",{className:" animate__animated animate__slideInRight  grid  grid-cols-2 forTable:grid-cols-1",children:[e.jsx(q,{}),e.jsx(W,{data:r})]})]})};export{re as default};
